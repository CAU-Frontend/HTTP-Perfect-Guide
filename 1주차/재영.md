# 🕐 HTTP 완벽 가이드 1장 🕐

전 세계의 웹 브라우저, 서버, 웹 애플리케이션은 모두 HTTP를 통해 서로 통신

HTTP는 신뢰성 있는 데이터 전송 프로토콜을 사용하여 통신 중 손상되지 않음을 보장

## 웹 클라이언트와 서버

웹 콘텐츠는 웹 서버에 존재

웹 서버는 데이터를 저장하고, HTTP 클라이언트가 요청한 데이터를 제공

<img width="867" height="213" alt="image" src="https://github.com/user-attachments/assets/7ba2797c-cd01-435d-822f-03040c6d8625" />

클라이언트는 HTTP 요청을 www.naver.com 서버로 보내고, 서버는 요청받은 객체를 찾아서 타입, 길이 등의 정보를 HTTP 응답에 담아서 클라이언트에 전송

## 웹 리소스

웹 서버는 웹 리소스를 관리하고 제공
HTML, 이미지, 텍스트 등 모든 종류의 파일

## 미디어 타입(MIME)

모든 종류의 파일을 제공하기 때문에 여러 데이터 타입을 제공
서버는 전송되는 데이터 각각에 MIME 타입이라는 데이터 포맷 라벨을 붙임

브라우저는 서버로부터 객체를 받을 때, 다룰 수 있는 객체인지 MIME 타입을 통해 확인해서 해당 타입에 맞게 실행(이미지 파일이면 렌더링, 오디오 파일이면 스피커를 통해 재생 등)

<img width="949" height="349" alt="image" src="https://github.com/user-attachments/assets/75ca8bda-9af8-4434-b1e7-d1b0c93c3827" />

MIME 타입은 사선(/)으로 구분된 주 타입가ㅗ 부 타입으로 이루어진 문자열 라벨

HTML => text/html
JPEG => image/jpeg

https://cjy3458.tistory.com/48

## URI

웹 서버에 있는 리소스는 각자 이름(식별자)을 보유하여 클라이언트는 요청할 리소스 지목 가능 => 그 이름을 **URI**라고 함

URI는 리소스를 고유하게 식별하고 위치를 지정해서 요청할 수 있음

```plaintext
http://www.joes-hardware.com/specials/saw-blade.gif
```

⬆️ joes-hardware 서버에 있는 이미지 리소스에 대한 URI 예시

<img width="463" height="208" alt="image" src="https://github.com/user-attachments/assets/c359a15b-480e-48bd-a04d-60a8551da39a" />

위 그림은 URL로 리소스의 위치와 접근 방법에 대한 예시 + 프로토콜에서 어떻게 해석되는지를 보여줌

### URL

리소스 식별자의 가장 흔한 형태로 특정 서버의 한 리소스에 대한 구체적인 위치 서술

대부분의 URL은 세 부분으로 이루어진 표준 포맷을 따름

1. http:// => scheme === 리소스에 접근하기 위해 사용되는 프로토콜 서술
2. 서버의 인터넷 주소(www.joes-hardware.com)
3. 웹 서버의 리소스(/specials/saw-blade.gif)

대부분의 URI는 URL

### URN

리소스 이름은 한 리소스에 대해 위치에 영향 받지 않는 고유한 이름 역할

리소스 위치가 달라지더라도 요청 가능

리소스 위치 분석을 위한 인프라가 부재하기에 채택이 늦어지고 있음 => 여전히 실험 상태

## 트랜잭션

HTTP 트랜잭션이란?

- 클라이언트가 서버에 요청을 보내고 서버가 그 요청에 대한 응답을 보내는 과정 전체를 의미
- request와 response로 구성
- 아래 그림과 같이 HTTP 메시지라는 정형화된 데이터를 이용해 과정이 이루어짐

<img width="463" height="208" alt="image" src="https://github.com/user-attachments/assets/dc427a6d-d8e8-4f4d-96ea-073d044b5180" />

## 메서드

HTTP는 여러 종류의 요청 명령 지원
모든 요청은 하나의 메서드를 가짐

메서드는 서버에게 어떤 동작을 해야되는지 알려줌

| HTTP 메서드 | 설명                                                                |
| :---------- | :------------------------------------------------------------------ |
| GET         | 서버에서 클라이언트로 지정한 리소스를 보내라                        |
| PUT         | 클라이언트에서 서버로 보낸 데이터를 지정한 이름의 리소스로 저장해라 |
| DELETE      | 지정한 리소스를 서버에서 삭제해라                                   |
| POST        | 클라이언트 데이터를 서버 게이트웨이 애플리케이션으로 보내라         |
| HEAD        | 지정한 리소스에 대한 응답에서, HTTP 헤더 부분만 보내라              |

## 상태 코드

모든 HTTP 응답은 상태 코드와 함께 전송
클라이언트에게 요청이 성공했는지 추가 조치가 필요했는지 등을 알려주는 세 자리 숫자

상태 코드에 텍스트로 된 사유 구절도 보내지만, 설명만을 위해 포함된 것일 뿐 실제 응답 처리는 상태 코드를 사용

| 상태 코드 | 설명                                      |
| :-------- | :---------------------------------------- |
| 200       | OK, 요청 성공                             |
| 302       | Found, 리소스의 주소가 다른 곳으로 옮겨짐 |
| 404       | Not Found, 요청한 리소스를 찾을 수 없음   |

## 메시지

HTTP 요청과 응답 과정에서 사용되는 HTTP 메시지
HTTP 메시지는 단순한 줄 단위 문자열

<img width="485" height="168" alt="image" src="https://github.com/user-attachments/assets/3c467448-9266-4241-b458-6cb9678c9ad7" />

**시작줄**

- 요청: 서버가 무엇을 해야 되는지
- 응답: 어떤 동작을 했는지

**헤더**

- : 로 구분된 하나의 KEY와 하나의 VALUE로 구성

**본문**
헤더 뒤에 빈 줄 다음에 어떤 종류의 데이터든 들어갈 수 있는 메시지 본문이 담김

### 메시지 예시

<img width="840" height="784" alt="image" src="https://github.com/user-attachments/assets/55b26ff1-f1a7-472c-84be-689529928c69" />

## TCP 커넥션

메시지는 TCP 커넥션을 통해 다른 곳으로 이동

### TCP/IP

HTTP는 애플리케이션 계층 프로토콜
전송은 신뢰성 있는 프로토콜인 **TCP/IP**에게 맡김

TCP

- 오류 없는 데이터 전송
- 순서에 맞게 전달
- 조각나지 않은 데이터 스트림

⭐ 용어
TCP란? 컴퓨터 간의 데이터 통신을 위한 신뢰성 있는 프로토콜
IP란? 패킷 통신 방식의 인터넷 프로토콜
TCP/IP란? TCP와 IP가 층을 이루는 패킷 교환 네트워크 프로토콜의 집합

<img width="390" height="236" alt="image" src="https://github.com/user-attachments/assets/752bf512-bf03-49ca-ba84-3cddc4007655" />

## 접속, IP Address, PORT

통신을 하기 전에 IP 주소와 PORT 번호를 사용해 클라이언트와 서버 사이에 TCP/IP 커넥션 필요

URL을 이용함

```plaintext
1. http://207.200.83.28:80/index.html => ip 주소와 port 번호로 연결
2. http://www.netscape.com:80/index.html => ip 주소는 없지만 문자열로 된 도메인, hostname으로 연결 => DNS를 이용해 IP로 변환
```

port 번호가 없어도 기본값 80이라고 가정

TCP/IP 를 통해 클라이언트와 서버가 통신하는 과정

1. 웹브라우저는 서버의 URL에서 호스트명을 추출한다
2. 웹 브라우저는 서버의 호스트명을 IP로 반환한다.
3. 웹 브라우저는 URL에서 포트번호를 추출한다.
4. 이때 포트 번호가 적혀있지않으면 기본적으로 포트번호를 80으로 설정한다.
5. 웹브라우저는 웹 서버와 TCP커넥션(3-handshake)를 맺는다.
6. 웹 브라우저는 서버에 HTTP 요청을 보낸다
7. 서버는 웹 브라우저에 HTTP 응답을 돌려준다.
8. 커넥션이 닫히면(4-handshake 이후), 브라우저는

## 프로토콜 버전

여러 버전이 있지만 HTTP/1.1이 현재 가장 많이 쓰이고 있다.

## 웹의 구성요소

인터넷과 상호작용하는 웹 애플리케이션

**프락시**
클라이언트와 서버 사이에 위치한 HTTP 중개자

**캐시**
많이 찾는 웹페이지를 클라이언트 가까이에 보관하는 HTTP ckdrh

**게이트웨이**
다른 애플리케이션과 연결된 특별한 웹 서버

**터널**
단순히 HTTP 통신을 전달하기만 하는 특별한 프락시

**에이전트**
자동화된 HTTP 요청을 만드는 준지능적 웹 클라이언트

### Proxy

보안, 앱 통합, 성능 최적화를 위한 중요한 구성요소

클라이언트와 서버 사이에 위치하여 모든 HTTP 요청을 받아 서버에 전달(사용자를 대신해서 서버에 접근)
웹 트래픽 흐름 속에서 신뢰할 만한 중개자 역할
request와 response를 필터링

### Cache

제공하는 데이터 중 자주 찾는 것의 사본을 저장해주는 특별한 종류의 proxy 서버
클라이언트가 같은 데이터를 요청하면 캐시가 가진 사본을 전달 받는 방식으로 더 빠르게 데이터를 받을 수 있음

HTTP는 캐시를 효율적으로 동작하게 하고 캐시된 콘텐츠를 최신 버전으로 유지하면서 동시에 프라이버시도 보호하기 위한 많은 기능 정의

### Gateway

다른 서버들의 중개자로 동작
HTTP 트래픽을 다른 프로토콜로 변환하기 위해 사용

ex)
HTTP/FTP 게이트웨이는 FTP URI에 대한 HTTP 요청을 받아 FTP 프로토콜을 이용해 데이터를 받고, 받아온 데이터는 HTTP 메시지에 담겨 클라이언트에게 응답

### Tunnel

두 커넥션 사이에서 데이터를 열어보지 않고 그대로 전달하는 HTTP 애플리케이션
HTTP 데이터가 아닌 데이터를 하나 이상의 HTTP 연결을 통해 그대로 전송하기 위해 사용

ex)
암호화된 SSL 트래픽을 HTTP 커넥션으로 전송하여 사내 방화벽 통과

### Agent

HTTP 요청을 만들어주는 프로그램 (웹 브라우저)
웹 브라우저에 대해서만 살펴봤지만 여러 종류가 더 있음

# 🕑 HTTP 완벽 가이드 2장(URL과 리소스) 🕑

URL은 인터넷의 리소스를 가리키는 표준 이름

- 전자정보 일부를 가리키고 그것이 어디에 있고 어떻게 접근이 가능한지 알려줌

## 인터넷 리소스 탐색

URL을 이용해 사람이 HTTP 및 다른 프로토콜을 통해 접근 가능

URI는 URL URN으로 구성된 종합적인 개념

URN은 리소스의 위치에 상관없이 이름만으로 리소스를 식별

URL은 리소스가 어디 있는지까지 포함해서 리소스를 식별

http://www.naver.com/seasonal/index-fall.html 을 예시로 들어보자

1. URL의 첫 부분인 HTTP RUL의 스킴이다. 스킴은 웹 클라이언트가 리소스에 어떤 방식으로 접근할지 알려줌

- 예시에서는 HTTP 프로토콜을 이용해서 접근

2. www.naver.com은 서버의 위치. 웹 클라이언트에서 리소스가 어디에 호스팅 되어 있는지 알려줌

3. /seasonal/index-fall.html은 리소스의 경로. 서버에 존재하는 로컬 리소스들 중에서 요청받은 리소스가 무엇인지 알려줌

mailto, ftp, rtsp등 다른 가용한 프로토콜을 사용할 수도 있다.

'스킴://서버위치/경로' 구조인데, 모든 사람이 같은 방식으로 이름을 써서 리소스를 찾을 수 있도록 단일 방식의 작명 규칙을 가진 것

### 스킴

사용할 프로토콜, 주어진 리소스에 어떻게 접근하는지 알려줌

url을 파싱하는 애플리케이션이 어떤 프로토콜을 사용하여 리소스를 요청해야 하는지 알려주는 것

알파벳으로 시작하고 뒤에 붙는 요소와 : 문자로 구분, 대소문자 구분 x

### 호스트와 포트

리소스를 호스팅한 장비와 그 장비 내에서 리소스에 접근할 수 있는 서버가 어디에 있는지 알아야 함
호스트와 포트는 그 정보를 제공

호스트는 리소스를 가지고 있는 인터넷 상의 호스트 장비
www.naver.com과 같이 호스트 명이나 IP 주소로 제공

포트는 서버가 열어놓은 네트워크 포트를 가리킴
내부적으로 TCP 프로토콜을 사용하는 HTTP는 기본 80 포트 사용

### 경로

리소스가 서버 어디에 위치한지 제공
파일 시스템 경로와 유사한 구조를 가짐

/seasonal/index-fall.html => "/" 를 기준으로 경로조각이 나뉨(파일 시스템 파일 경로와 유사)

### 파라미터

서버에 정확한 요청을 하기 위한 입력

이름 값 쌍의 리스트로 ";" 문자로 구분하여 url에 기술

### 질의 문자열

요청받을 리소스 형식의 범위를 좁히기 위해서 사용

index-fall.cgi?item=12731

- 12731의 id를 가진 재고가 있는지 확인하기 위한 부분

편의상 많은 게이트웨이가 &로 나뉜 이름=값 쌍 형식의 질의 문자열을 사용

- ?item=12731&color=blue

### 프래그먼트

리소스에 대한 특정 절을 가리키는 것
HTML 문서에 특정 이미지나 일부분을 가리킬 수 있다.
"#" 문자 뒤에 이어서 옴

- index-fall.html#drills

프래그먼트를 전달하는 것이 아니라 전체 리소스를 내려받은 후, 프래그먼트를 사용하여 보고자 하는 리소스의 일부를 보여줌

### 단축 URL

단축된 URL 주소를 인식하고 사용할 수 있음
상대 URL은 리소스 안에 있는 리소스를 간결하게 기술하는데 사용

### 상대 URL

URL은 상대 URL과 절대 URL 2가지로 나뉨

절대 URL

- 리소스에 접근하는데 필요한 전체 정보

상대 URL

- URL을 단축해서 표기
- href= ./a.html => 문서의 url 기준으로 상대경로 해석
- 경로에 대한 정보는 리소스의 "기저 URL"에서 알아낼 수 있음
- 브라우저는 상대 URL과 절대 URL 간에 상호변환 가능해야 함

기저 URL

- 리소스에서 명시적으로 제공함
  - HTML 문서의 <BASE> HTML 태그
- 리소스를 포함한 기저 URL
  - 기저 URL이 명시되지 않은 리소스에 포함된 경우, 해당 리소스의 URL이 기저 URL임
- 기저 URL 없음
  - 절대 URL로만 이루어짐 => 깨진 URL일 수 있음

상대, 절대 상호변환

- 상대 URL과 기저 URL을 각각의 컴포넌트 조각으로 분리
- URL 파싱
- 컴포넌트 단위 분리

# 🕒 HTTP 완벽 가이드 3장(HTTP 메시지)🕒

**학습 목표**

- 메시지가 어떻게 흘러가는가
- HTTP 메시지의 세 부분
- 요청과 응답 메시지의 차이
- 요청 메시지가 지원하는 여러 기능
- 응답 메시지가 반환하는 여러 상태 코드
- 여러 HTTP 헤더들의 역할

### 메시지의 흐름

HTTP 메시지 === HTTP 애플리케이션 간에 주고받은 데이터의 블록

메시지는 내용과 의미를 설명하는 텍스트 메타 정보로 시작하고 그 다음에 선택적으로 데이터를 담음

메시지는 클라이언트, 서버, 프록시 사이를 오간다.

인바운드, 아웃바운드, 업스트림, 다운스트림은 메시지의 방향을 의미하는 용어

메시지는 원 서버 방향을 인바운드로 하여 송신

메시지가 서버로 향하는 것은 인바운드로 이동, 모든 처리가 끝난 뒤에 메시지가 클라이언트로 돌아오는 것은 아웃바운드 이동

다운 스트림

메시지는 무조건 다운스트림으로 흐름
메시지의 발송자는 수신자의 업스트림
클라이언트가 보낼 때는 클라이언트가 업스트림
서버가 보낼 때는 클라이언트가 다운스트림

### 메시지의 구조

HTTP 메시지는 데이터의 구조화된 블록

각 메시지는 클라이언트로부터의 요청이나 서버로부터의 응답 중 하나를 포함

HTTP 메시지는 HTTP 요청 메시지거나 HTTP 응답 메시지 중 하나이다.

시작줄, 헤더, 본문 3 부분으로 나뉜다.

시작줄과 헤더

- 줄 단위로 분리된 아스키 문자열, 캐리지 리턴과 개행 문자로 구성된 2글자의 줄바꿈 문자열로 한 줄이 끝남
- 줄바꿈 문자열을 CRLF라고 함
- 하지만 \r 과 \n이 모두 담겨있지 않은 http 애플리케이션이 가끔 있다

본문

- 선택적인 데이터 덩어리
- 텍스트나 이진 데이터를 포함할 수 있음 || 비어있을 수도 있음

<img width="860" height="214" alt="image" src="https://github.com/user-attachments/assets/da1dd4b0-ea47-404a-8471-d73981ee2135" />

### 메시지 문법

요청과 응답은 구조가 동일하나 시작줄만 문법이 다름

요청 메시지

- 웹 서버에 어떤 동작을 요구
- 형식

```bash
[메서드] [요청 URL] [HTTP 버전]
[헤더]

[본문]
```

응답 메시지

- 요청의 결과를 클라이언트에게 전송
- 형식

```bash
[HTTP 버전] [상태 코드] [사유 구절]
[헤더]

[본문]
```

부분별 설명

메서드

- 서버가 리소스에 대해 수행해주길 바라는 동작
- GET, POST, PUT, DELETE 등
- 한 단어로 되어있음

요청 URL

- 리소스를 지칭하는 완전한 URL OR URI 경로
- 리소스를 가리키는 경로라면 문제 없음

HTTP 버전

- 이 메시지 통신을 위해 사용하는 HTTP 버전
- HTTP/ 정수, 정수 로 표기

상태 코드

- 요청 중에 어떤 일이 일어났는지를 나타내는 세 자리 숫자
- 명세에 정의된 상태 코드와 의미를 이용

사유 구절

- 숫자로 된 상태 코드의 의미를 사람이 이해할 수 있게 설명해주는 짧은 문구
- 상태 코드 이후부터 줄바꿈 문자열까지가 사유 구절
